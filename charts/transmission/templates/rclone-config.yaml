{{- if .Values.sync.enabled }}
apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-sync-config
  labels:
    app: {{ .Release.Name }}
data:
  ".rclone.conf": |
    [s3]
    type = s3
    env_auth = false
    access_key_id = {{ .Values.sync.accessKey }}
    secret_access_key = {{ .Values.sync.secretKey }}
    endpoint = {{ .Values.sync.url }}

{{- end}}